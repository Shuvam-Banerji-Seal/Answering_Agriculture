<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üåæ IndicAgri Bot - Enhanced Voice & Text Interface</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üåæ</text></svg>">
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üåæ IndicAgri Bot</h1>
            <p class="subtitle">Advanced Agricultural Assistant with Enhanced RAG & Voice Support</p>
            <p>Ask questions about farming, crops, soil, pests, and sustainable agriculture with intelligent multi-agent search</p>
        </div>

        <div class="main-content">
            <!-- Enhanced RAG Configuration Panel -->
            <div class="config-panel">
                <h3>‚öôÔ∏è Enhanced RAG Configuration</h3>
                
                <div class="rag-settings">
                    <h4>Search Settings</h4>
                    <div class="search-toggles">
                        <label class="toggle-switch">
                            <input type="checkbox" id="enable-database-search" checked>
                            <span class="toggle-slider"></span>
                            Database Search
                        </label>
                        <label class="toggle-switch">
                            <input type="checkbox" id="enable-web-search" checked>
                            <span class="toggle-slider"></span>
                            Web Search
                        </label>
                    </div>
                    
                    <div class="form-group">
                        <label for="num-sub-queries">Sub-queries to Generate:</label>
                        <div class="slider-container">
                            <input type="range" id="num-sub-queries" class="form-control" min="1" max="5" value="3">
                            <span id="num-sub-queries-value" class="slider-value">3</span>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="db-chunks-per-query">Database Chunks per Query:</label>
                        <div class="slider-container">
                            <input type="range" id="db-chunks-per-query" class="form-control" min="1" max="10" value="3">
                            <span id="db-chunks-per-query-value" class="slider-value">3</span>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="web-results-per-query">Web Results per Query:</label>
                        <div class="slider-container">
                            <input type="range" id="web-results-per-query" class="form-control" min="1" max="10" value="3">
                            <span id="web-results-per-query-value" class="slider-value">3</span>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="synthesis-model">Synthesis Model:</label>
                        <select id="synthesis-model" class="form-control">
                            <option value="llama3.2">Llama 3.2</option>
                        </select>
                        <button id="refresh-models" class="btn btn-secondary">üîÑ Refresh Models</button>
                    </div>
                </div>
            </div>

            <!-- Voice Input Panel -->
            <div class="voice-panel">
                <h3>üé§ Voice Input</h3>
                <div class="voice-controls">
                    <button id="record-btn" class="btn btn-primary">üé§ Start Recording</button>
                    <span id="recording-status" class="recording-status"></span>
                </div>
                
                <div class="voice-settings">
                    <div class="form-group">
                        <label for="language-select">Language:</label>
                        <select id="language-select" class="form-control">
                            <option value="en">English</option>
                            <option value="hi">Hindi</option>
                            <option value="bn">Bengali</option>
                            <option value="te">Telugu</option>
                            <option value="ta">Tamil</option>
                            <option value="mr">Marathi</option>
                            <option value="gu">Gujarati</option>
                            <option value="kn">Kannada</option>
                            <option value="ml">Malayalam</option>
                            <option value="pa">Punjabi</option>
                            <option value="or">Odia</option>
                            <option value="as">Assamese</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="use-local-model" checked>
                            Use Local Voice Model (Faster)
                        </label>
                    </div>
                    
                    <div class="api-settings">
                        <div class="form-group">
                            <label for="api-key">SarvamAI API Key (Optional):</label>
                            <input type="text" id="api-key" class="form-control" placeholder="Enter your SarvamAI API key" autocomplete="off">
                        </div>
                        <div class="form-group">
                            <label for="hf-token">HuggingFace Token (Optional):</label>
                            <input type="text" id="hf-token" class="form-control" placeholder="Enter your HuggingFace token" autocomplete="off">
                        </div>
                    </div>
                </div>
            </div>

            <!-- Text Input Panel -->
            <div class="input-panel">
                <h3>üí¨ Text Input</h3>
                <div class="input-container">
                    <textarea id="user-input" class="form-control" rows="4" 
                              placeholder="Ask about farming techniques, crop diseases, soil management, sustainable agriculture practices, or any agriculture-related question..."></textarea>
                    <button id="send-btn" class="btn btn-success">Send Query</button>
                </div>
            </div>

            <!-- Response Panel with Tabs -->
            <div class="response-panel">
                <h3>üìã Response</h3>
                
                <!-- Tab Navigation -->
                <div class="tabs">
                    <button class="tab-btn active" data-tab="response">Response</button>
                    <button class="tab-btn" data-tab="pipeline">Pipeline Info</button>
                    <button class="tab-btn" data-tab="markdown">Markdown</button>
                    <button class="tab-btn" data-tab="citations">Citations</button>
                </div>
                
                <!-- Tab Content -->
                <div class="tab-content">
                    <div id="response-pane" class="tab-pane active">
                        <div id="response-content" class="response-content">
                            <p class="placeholder-text">Your enhanced search results will appear here...</p>
                        </div>
                    </div>
                    
                    <div id="pipeline-pane" class="tab-pane">
                        <div id="pipeline-info" class="pipeline-info">
                            <p class="placeholder-text">Pipeline processing information will appear here...</p>
                        </div>
                    </div>
                    
                    <div id="markdown-pane" class="tab-pane">
                        <div class="markdown-controls">
                            <button id="download-markdown" class="btn btn-secondary">üì• Download Markdown</button>
                        </div>
                        <div id="markdown-content" class="markdown-content">
                            <p class="placeholder-text">Markdown report will appear here...</p>
                        </div>
                    </div>
                    
                    <div id="citations-pane" class="tab-pane">
                        <div id="citations-content" class="citations-content">
                            <p class="placeholder-text">Source citations will appear here...</p>
                        </div>
                    </div>
                </div>
                
                <!-- Loading Indicator -->
                <div id="loading-indicator" class="loading-indicator" style="display: none;">
                    <div class="spinner"></div>
                    <p>Processing your query with enhanced multi-agent search...</p>
                </div>
            </div>
        </div>

        <!-- Status Panel -->
        <div class="status-panel">
            <h3>üìä System Status</h3>
            <div class="status-grid">
                <div class="status-item">
                    <span class="status-label">Enhanced RAG:</span>
                    <span id="rag-status" class="status-value">Checking...</span>
                </div>
                <div class="status-item">
                    <span class="status-label">Voice Transcription:</span>
                    <span id="voice-status" class="status-value">Checking...</span>
                </div>
                <div class="status-item">
                    <span class="status-label">Models:</span>
                    <span id="models-status" class="status-value">Checking...</span>
                </div>
            </div>
            <button id="refresh-status" class="btn btn-secondary">üîÑ Refresh Status</button>
        </div>

        <!-- Footer -->
        <div class="footer">
            <p>üåæ <strong>IndicAgri Bot</strong> - Powered by Enhanced RAG with Multi-Agent Search</p>
            <p>Combines local agricultural database with real-time web search for comprehensive answers</p>
        </div>
    </div>

    <script src="/static/app.js"></script>
</body>
</html>
